# Production-grade Spring Boot properties

# Application
spring.application.name=api-kompu-service
spring.profiles.active=${SPRING_PROFILES_ACTIVE:prod}

# Server
server.port=${SERVER_PORT:3333}
server.servlet.context-path=${SERVER_SERVLET_CONTEXT_PATH:/}
server.servlet.session.timeout=${SERVER_SESSION_TIMEOUT:30m}

# SSL (enable by setting env vars and providing a keystore)
server.ssl.enabled=${SERVER_SSL_ENABLED:false}
server.ssl.key-store=${SERVER_SSL_KEY_STORE:}
server.ssl.key-store-password=${SERVER_SSL_KEY_STORE_PASSWORD:}
server.ssl.key-alias=${SERVER_SSL_KEY_ALIAS:}

# Basic validation query for some drivers
spring.datasource.test-on-borrow=true
spring.datasource.validation-query=SELECT 1

# Actuator / monitoring
management.endpoints.web.base-path=/actuator
management.endpoints.web.exposure.include=health,info,metrics,prometheus,loggers
management.endpoints.web.exposure.exclude=env,beans
management.endpoint.health.show-details=when-authorized
management.endpoint.health.probes.enabled=true
management.server.port=${MANAGEMENT_SERVER_PORT:3333}
management.metrics.export.prometheus.enabled=true

# Logging
logging.level.root=INFO
logging.level.org.springframework=INFO
logging.level.com.kompu=INFO
logging.file.name=${LOG_PATH:./logs/api-kompu-service.log}
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level %logger{36} - %msg%n

# Multipart limits
spring.servlet.multipart.max-file-size=${MAX_FILE_SIZE:10MB}
spring.servlet.multipart.max-request-size=${MAX_REQUEST_SIZE:10MB}

# Eureka Client Configuration
eureka.client.enabled=${EUREKA_CLIENT_ENABLED:true}
eureka.client.serviceUrl.defaultZone=${EUREKA_SERVER_URL:http://localhost:8761/eureka/}
eureka.client.healthcheck.enabled=true
eureka.client.registryFetchIntervalSeconds=${EUREKA_FETCH_INTERVAL:30}
eureka.client.leaseRenewalIntervalInSeconds=${EUREKA_RENEWAL_INTERVAL:30}
eureka.instance.hostname=${EUREKA_INSTANCE_HOSTNAME:localhost}
eureka.instance.preferIpAddress=${EUREKA_PREFER_IP_ADDRESS:false}
eureka.instance.metadata-map.version=${project.version:1.0.0}