# Development profile overrides
# Use this file for local development. Keep secrets out of source control.

# Datasource (local/dev Postgres)
spring.datasource.url=jdbc:postgresql://localhost:5432/kompu_local_db
spring.datasource.username=postgres
spring.datasource.password=${DEV_DATASOURCE_PASSWORD:qwerty123poiu}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000

# JPA / Hibernate - allow updates locally
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.type.json_format_mapper=com.kompu.api.infrastructure.config.web.response.WebJacksonJsonFormatMapper

# Logging - more verbose for development
logging.level.root=ERROR
logging.level.com.kompu=DEBUG
logging.file.name=${LOG_PATH:./logs/api-kompu-service.log}
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level %logger{36} - %msg%n

# Actuator - expose everything locally for convenience
management.endpoints.web.exposure.include=* 
management.endpoint.shutdown.enabled=true

# Developer conveniences
spring.main.banner-mode=console

# Eureka Client (Dev)
eureka.client.enabled=${DEV_EUREKA_CLIENT_ENABLED:true}
eureka.client.serviceUrl.defaultZone=${DEV_EUREKA_SERVER_URL:http://localhost:8761/eureka/}
eureka.client.healthcheck.enabled=true
eureka.client.registryFetchIntervalSeconds=30
eureka.client.leaseRenewalIntervalInSeconds=30
eureka.instance.hostname=${DEV_EUREKA_INSTANCE_HOSTNAME:localhost}
eureka.instance.preferIpAddress=false

# File Storage (Dev)
app.storage.local.upload-dir=./uploads-dev
